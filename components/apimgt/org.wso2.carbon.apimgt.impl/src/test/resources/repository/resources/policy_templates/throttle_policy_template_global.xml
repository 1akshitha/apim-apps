###################################  macros  #######################################
##
###generate key
#macro( getKey )##
global_${policy.getPolicyName()}_key##
#end
###generate rule
#macro( getRule $policy)
global_${policy.getPolicyName()}##
#end
<policy tier="global_$policy.getPolicyName()" level="global" name="#getRule($policy)">
	<eligibilityQuery>
		FROM RequestStream
		SELECT '#getRule($policy)' AS rule, messageID, true AS isEligible, ($condition) as isLocallyThrottled, '#getKey()' AS throttle_key
		INSERT INTO EligibilityStream;	
	</eligibilityQuery>	
</policy>
